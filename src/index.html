<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tanistagram</title>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/grd.css">
    <link rel="stylesheet" href="css/app.css">
    <link rel="icon" href="img/favicon.jpg">
    <link rel="shortcut icon" href="img/favicon.jpg">
    <link rel="manifest" href="manifest.json">
    <meta name="author" content="Shogo Sensui">
    <meta name="copyright" content="Copyright (c) Hiroki Tani">
    <meta name="description" content="A curated list of Hiroki Tani">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://tanistagram.com">
    <meta property="og:site_name" content="Tanistagram">
    <meta property="og:title" content="Tanistagram">
    <meta property="og:description" content="A curated list of Hiroki Tani">
    <meta property="og:image" content="img/hiloki.jpg">
    <meta name="twitter:url" content="https://tanistagram.com">
    <meta name="twitter:title" content="Tanistagram">
    <meta name="twitter:description" content="A curated list of Hiroki Tani">
    <meta name="twitter:image" content="img/hiloki.jpg">
    <link rel="apple-touch-icon" href="img/touch-icon-iphone.jpg">
    <link rel="apple-touch-icon" sizes="76x76" href="img/touch-icon-ipad.jpg">
    <link rel="apple-touch-icon" sizes="120x120" href="img/touch-icon-iphone-retina.jpg">
    <link rel="apple-touch-icon" sizes="152x152" href="img/touch-icon-ipad-retina.jpg">
  </head>
  <body>
    <template id="tani-image-template">
      <style>
        img {
          width: 100%;
          height: 100%;
          object-fit: contain;
          cursor: pointer;
        }
      </style>
      <picture>
        <source type="image/webp">
        <img>
      </picture>
    </template>
    <template id="book-affiliate-template">
      <style>
        img {
          width: 100%;
          height: 100%;
          object-fit: contain;
          cursor: pointer;
          border: none;
          outline: none;
        }
      </style>
      <a target="_blank">
        <img>
      </a>
    </template>

    <script>
    {
      const currentScript = document.currentScript;
      const ownerDocument = currentScript.ownerDocument;

      class TaniImage extends HTMLElement {
        get src() {
          return `img/tani/${this.id}.jpg`;
        }

        get srcset() {
          return `img/tani/${this.id}.webp`;
        }

        constructor() {
          super();

          this.attachShadow({ mode : 'open' });
          const template = ownerDocument.querySelector('#tani-image-template');
          const clone = template.content.cloneNode(true);
          this.shadowRoot.appendChild(clone);
        }

        connectedCallback() {
          this.shadowRoot.querySelector('img').src = this.src;
          this.shadowRoot.querySelector('source').src = this.srcset;
        }
      }

      class BookAffiliate extends HTMLElement {
        get url() {
          return this.getAttribute('url');
        }

        get src() {
          return `img/book/${this.getAttribute('name')}.jpg`;
        }

        constructor() {
          super();

          this.attachShadow({ mode : 'open' });
          const template = ownerDocument.querySelector('#book-affiliate-template');
          const clone = template.content.cloneNode(true);
          this.shadowRoot.appendChild(clone);
        }

        connectedCallback() {
          this.shadowRoot.querySelector('a').href = this.url;
          this.shadowRoot.querySelector('img').src = this.src;
          this.shadowRoot.querySelector('img').alt = this.title;
        }
      }

      customElements.define('tani-image', TaniImage);
      customElements.define('book-affiliate', BookAffiliate);
    }
    </script>
    <aside id="backdrop" class="Backdrop Backdrop--hidden">
      <div class="Grid -center -middle">
        <div class="Cell">
          <img>
        </div>
      </div>
    </aside>
    <header class="Header">
      <div class="Container">
        <div class="Grid">
          <div class="Cell">
            <h1 class="Title">Tanistagram</h1>
          </div>
        </div>
      </div>
    </header>
    <main class="Main">
      <div class="Container">
        <aside class="Aside">
          <div class="Grid">
            <div class="Cell -3of12">
              <img src="img/hiloki.jpg" class="Avatar" alt="@hiloki">
            </div>
            <div class="Cell -9of12">
              <h2>Hiroki Tani</h2>
              <p>Tani was born in 1982.</p>
            </div>
          </div>
        </aside>
        <div id="image-container" class="Grid -center -stretch Gallery"></div>
      </div>
    </main>
    <footer class="Footer">
      <div class="Container">
        <div id="affiliate-container" class="Grid -center -middle Affiliate"></div>
        <div class="Grid -center">
          <div class="Cell">
            <div class="Copyright">Â© 2016 TANISTAGRAM developed by <a href="https://twitter.com/1000ch">@1000ch</a></div>
          </div>
        </div>
      </div>
    </footer>
    <script src="js/app.js"></script>
  </body>
</html>
